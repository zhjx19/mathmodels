<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Inequality Indices — inequality • mathmodels</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Inequality Indices — inequality"><meta property="og:description" content="Computes inequality indices for individual or grouped data:
gini0 calculates the Gini coefficient for individual sample data.
gini calculates the Gini coefficient for grouped data using income and population shares.
theil0 calculates the Theil index for individual sample data.
theil calculates the Theil index for grouped average data.
theil0_g calculates the Theil index and decomposition for grouped sample data.
theil_g calculates the Theil index and decomposition for grouped average data.
theil_g2_cross calculates the Theil index and decomposition for two-level cross-grouped average data.
theil_g2_nest calculates the Theil index and decomposition for two-level nested grouped average data."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mathmodels</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/ahp-weight.html">AHP: Analytic Hierarchy Process</a>
    </li>
    <li>
      <a href="../articles/combine-weights.html">Combine Subjective and Objective Weights</a>
    </li>
    <li>
      <a href="../articles/critic-weight.html">CRITIC Weight Method</a>
    </li>
    <li>
      <a href="../articles/dea.html">Data Envelopment Analysis</a>
    </li>
    <li>
      <a href="../articles/entropy-weight.html">Entropy Weight Method</a>
    </li>
    <li>
      <a href="../articles/fuzzy-eval.html">Fuzzy Comprehensive Evaluation</a>
    </li>
    <li>
      <a href="../articles/grey-relational.html">Grey Relational Analysis</a>
    </li>
    <li>
      <a href="../articles/malmquist.html">Malmquist Index</a>
    </li>
    <li>
      <a href="../articles/pca-weight.html">PCA-Based Weighting Method</a>
    </li>
    <li>
      <a href="../articles/preprocessing.html">Data Preprocessing for Multi-indicator Evaluation</a>
    </li>
    <li>
      <a href="../articles/rank-sum-ratio.html">Rank-sum ratio method</a>
    </li>
    <li>
      <a href="../articles/topsis.html">Entropy-weighted TOPSIS</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/zhjx19/mathmodels/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Inequality Indices</h1>
    <small class="dont-index">Source: <a href="https://github.com/zhjx19/mathmodels/blob/HEAD/R/inequality.R" class="external-link"><code>R/inequality.R</code></a></small>
    <div class="hidden name"><code>inequality.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Computes inequality indices for individual or grouped data:
<code>gini0</code> calculates the Gini coefficient for individual sample data.
<code>gini</code> calculates the Gini coefficient for grouped data using income and population shares.
<code>theil0</code> calculates the Theil index for individual sample data.
<code>theil</code> calculates the Theil index for grouped average data.
<code>theil0_g</code> calculates the Theil index and decomposition for grouped sample data.
<code>theil_g</code> calculates the Theil index and decomposition for grouped average data.
<code>theil_g2_cross</code> calculates the Theil index and decomposition for two-level cross-grouped average data.
<code>theil_g2_nest</code> calculates the Theil index and decomposition for two-level nested grouped average data.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">gini0</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">gini</span><span class="op">(</span><span class="va">x</span>, <span class="va">pop</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">theil0</span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">theil</span><span class="op">(</span><span class="va">y</span>, <span class="va">pop</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">theil0_g</span><span class="op">(</span><span class="va">data</span>, <span class="va">group</span>, <span class="va">y</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">theil_g</span><span class="op">(</span><span class="va">data</span>, <span class="va">group</span>, <span class="va">y</span>, <span class="va">p</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">theil_g2_cross</span><span class="op">(</span><span class="va">data</span>, <span class="va">group1</span>, <span class="va">group2</span>, <span class="va">y</span>, <span class="va">pop</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">theil_g2_nest</span><span class="op">(</span><span class="va">data</span>, <span class="va">group1</span>, <span class="va">group2</span>, <span class="va">y</span>, <span class="va">pop</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>For <code>gini0</code>, <code>gini</code>: Numeric vector of non-negative values (e.g., income).</p></dd>


<dt id="arg-pop">pop<a class="anchor" aria-label="anchor" href="#arg-pop"></a></dt>
<dd><p>For <code>gini</code>: Numeric vector of group populations or population shares.
For <code>theil</code>, <code>theil_g</code>, <code>theil_g2_cross</code>, <code>theil_g2_nest</code>: Name of population variable (character).</p></dd>


<dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>For <code>theil0</code>: Numeric vector of individual incomes.
For <code>theil</code>, <code>theil0_g</code>, <code>theil_g</code>, <code>theil_g2_cross</code>, <code>theil_g2_nest</code>: Name of income variable (character).</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>For <code>theil0_g</code>, <code>theil_g</code>, <code>theil_g2_cross</code>, <code>theil_g2_nest</code>: Data frame containing variables.</p></dd>


<dt id="arg-group">group<a class="anchor" aria-label="anchor" href="#arg-group"></a></dt>
<dd><p>For <code>theil0_g</code>, <code>theil_g</code>: Name of grouping variable (e.g., province).</p></dd>


<dt id="arg-group-">group1<a class="anchor" aria-label="anchor" href="#arg-group-"></a></dt>
<dd><p>For <code>theil_g2_cross</code>, <code>theil_g2_nest</code>: Name of first grouping variable (e.g., region or province).</p></dd>


<dt id="arg-group-">group2<a class="anchor" aria-label="anchor" href="#arg-group-"></a></dt>
<dd><p>For <code>theil_g2_cross</code>, <code>theil_g2_nest</code>: Name of second grouping variable (e.g., type or city).</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>For <code>gini0</code>, <code>gini</code>: Numeric Gini coefficient (0 to 1).
For <code>theil0</code>, <code>theil</code>: Numeric Theil index.
For <code>theil0_g</code>, <code>theil_g</code>: List with two tibbles:</p><ul><li><p><code>total</code>: Tibble with columns <code>type</code> ("value", "rate"), <code>theil</code> (total Theil index and 1), <code>Tb</code> (between-group inequality and contribution rate), <code>Tw</code> (within-group inequality and contribution rate).</p></li>
<li><p><code>within</code>: Tibble with columns <code>group</code> (grouping variable), <code>Twi</code> (within-group Theil indices), <code>Rwi</code> (within-group contribution rates).</p></li>
</ul><p>For <code>theil_g2_cross</code>: List with two tibbles:</p><ul><li><p><code>total</code>: Tibble with columns <code>type</code> ("value", "rate"), <code>theil</code> (total Theil index and 1), <code>Tb</code> (between-group1 inequality and contribution rate), <code>Tw</code> (within-group1 inequality and contribution rate).</p></li>
<li><p><code>within</code>: Tibble with columns <code>group1</code> (first grouping variable), <code>Twi</code> (within-group1 Theil indices), <code>Rwi</code> (within-group1 contribution rates).</p></li>
</ul><p>For <code>theil_g2_nest</code>: Tibble with two rows:</p><ul><li><p>Row 1 (<code>type = "value"</code>): Columns <code>theil</code> (total Theil index), <code>Tw</code> (within-group2 inequality), <code>Tb</code> (between-group2 inequality), <code>Tb_group1</code> (between-group1 inequality), <code>Tb_group2</code> (within-group1 between-group2 inequality).</p></li>
<li><p>Row 2 (<code>type = "ratio"</code>): Columns <code>theil</code> (1), <code>Tw</code> (within-group2 contribution rate), <code>Tb</code> (between-group2 contribution rate), <code>Tb_group1</code> (between-group1 contribution rate), <code>Tb_group2</code> (within-group1 between-group2 contribution rate).</p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Sample data</span></span></span>
<span class="r-in"><span><span class="va">income</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">30</span>, <span class="fl">40</span>, <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pop</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">150</span>, <span class="fl">200</span>, <span class="fl">250</span>, <span class="fl">300</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Gini coefficient (individual data)</span></span></span>
<span class="r-in"><span><span class="fu">gini0</span><span class="op">(</span><span class="va">income</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.4</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Gini coefficient (grouped data)</span></span></span>
<span class="r-in"><span><span class="fu">gini</span><span class="op">(</span><span class="va">income</span>, <span class="va">pop</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.225</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Theil index (individual sample)</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>g <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="st">"A"</span>,<span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"B"</span>,<span class="fl">10</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="fl">6</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">10</span>,<span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">8</span>,<span class="fl">4</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">6</span>,<span class="fl">6</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">4</span>,<span class="fl">4</span><span class="op">)</span>,<span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">theil0</span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.07907822</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Theil index (grouped average)</span></span></span>
<span class="r-in"><span><span class="va">data2</span> <span class="op">=</span> <span class="va">data</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">g</span>, <span class="va">y</span>, name <span class="op">=</span> <span class="st">"p"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">theil</span><span class="op">(</span><span class="va">data2</span><span class="op">$</span><span class="va">y</span>, <span class="va">data2</span><span class="op">$</span><span class="va">p</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.07907822</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Theil index with grouping (sample data)</span></span></span>
<span class="r-in"><span><span class="fu">theil0_g</span><span class="op">(</span><span class="va">data</span>, <span class="st">"g"</span>, <span class="st">"y"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   type   theil     Tb     Tw</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> value 0.079<span style="text-decoration: underline;">1</span> 0.011<span style="text-decoration: underline;">3</span> 0.067<span style="text-decoration: underline;">8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> rate  1      0.143  0.857 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $within</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   group    Twi    Rwi</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> A     0.166  0.776 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> B     0.010<span style="text-decoration: underline;">2</span> 0.081<span style="text-decoration: underline;">3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Theil index with grouping (average data)</span></span></span>
<span class="r-in"><span><span class="fu">theil_g</span><span class="op">(</span><span class="va">data2</span>, <span class="st">"g"</span>, <span class="st">"y"</span>, <span class="st">"p"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   type   theil     Tb     Tw</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> value 0.079<span style="text-decoration: underline;">1</span> 0.011<span style="text-decoration: underline;">3</span> 0.067<span style="text-decoration: underline;">8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> rate  1      0.143  0.857 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $within</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   group    Twi    Rwi</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> A     0.166  0.776 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> B     0.010<span style="text-decoration: underline;">2</span> 0.081<span style="text-decoration: underline;">3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Theil index with two-level cross-grouping</span></span></span>
<span class="r-in"><span><span class="va">data3</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Eastern"</span>, <span class="st">"Eastern"</span>, <span class="st">"Central"</span>, <span class="st">"Central"</span>, <span class="st">"Western"</span>, <span class="st">"Western"</span>, <span class="st">"Northeast"</span>, <span class="st">"Northeast"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Urban"</span>, <span class="st">"Rural"</span>, <span class="st">"Urban"</span>, <span class="st">"Rural"</span>, <span class="st">"Urban"</span>, <span class="st">"Rural"</span>, <span class="st">"Urban"</span>, <span class="st">"Rural"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  pop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">24491</span>, <span class="fl">21854</span>, <span class="fl">12850</span>, <span class="fl">22321</span>, <span class="fl">12423</span>, <span class="fl">23522</span>, <span class="fl">5930</span>, <span class="fl">4823</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  per_income <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">13375</span>, <span class="fl">4720</span>, <span class="fl">8809</span>, <span class="fl">2957</span>, <span class="fl">8783</span>, <span class="fl">2379</span>, <span class="fl">8730</span>, <span class="fl">3379</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">theil_g2_cross</span><span class="op">(</span><span class="va">data3</span>, <span class="st">"region"</span>, <span class="st">"type"</span>, <span class="st">"per_income"</span>, <span class="st">"pop"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   type  theil    Tw     Tb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> theil 0.187 0.137 0.049<span style="text-decoration: underline;">2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> ratio 1     0.736 0.264 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $within</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   group1       Twi    Rwi</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Eastern   0.115  0.314 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Central   0.145  0.166 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> Western   0.206  0.216 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> Northeast 0.094<span style="text-decoration: underline;">2</span> 0.040<span style="text-decoration: underline;">8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">theil_g2_cross</span><span class="op">(</span><span class="va">data3</span>, <span class="st">"type"</span>, <span class="st">"region"</span>, <span class="st">"per_income"</span>, <span class="st">"pop"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   type  theil     Tw    Tb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> theil 0.187 0.027<span style="text-decoration: underline;">2</span> 0.159</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> ratio 1     0.146  0.854</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $within</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   group1    Twi    Rwi</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Urban  0.022<span style="text-decoration: underline;">0</span> 0.084<span style="text-decoration: underline;">3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Rural  0.039<span style="text-decoration: underline;">9</span> 0.061<span style="text-decoration: underline;">3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Theil index with two-level nested grouping</span></span></span>
<span class="r-in"><span><span class="va">data4</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  province <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"A"</span>, <span class="st">"A"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"B"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  city <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A1"</span>, <span class="st">"A1"</span>, <span class="st">"A2"</span>, <span class="st">"A2"</span>, <span class="st">"B1"</span>, <span class="st">"B1"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  industry <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Manu"</span>, <span class="st">"Serv"</span>, <span class="st">"Manu"</span>, <span class="st">"Serv"</span>, <span class="st">"Manu"</span>, <span class="st">"Serv"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50000</span>, <span class="fl">45000</span>, <span class="fl">60000</span>, <span class="fl">55000</span>, <span class="fl">70000</span>, <span class="fl">65000</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  pop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10000</span>, <span class="fl">8000</span>, <span class="fl">15000</span>, <span class="fl">12000</span>, <span class="fl">10000</span>, <span class="fl">8000</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">theil_g2_nest</span><span class="op">(</span><span class="va">data4</span>, <span class="st">"province"</span>, <span class="st">"city"</span>, <span class="st">"y"</span>, <span class="st">"pop"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   type    theil       Tw      Tb Tb_group1 Tb_group2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> value 0.009<span style="text-decoration: underline;">55</span> 0.000<span style="text-decoration: underline;">944</span> 0.008<span style="text-decoration: underline;">60</span>   0.005<span style="text-decoration: underline;">80</span>   0.002<span style="text-decoration: underline;">80</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> ratio 1       0.098<span style="text-decoration: underline;">9</span>   0.901     0.608     0.293  </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jingxin zhang.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

